apiVersion: v1alpha
kind: imagerunner
sauce:
  region: us-west-1
suites:
  - name: TestCafe in Image Runner 
    workload: other
    image: saucelabs/imagerunner-testcafe-basic-example:latest
    entrypoint: /opt/testcafe/docker/testcafe-docker.sh "chromium" "/app/tests/**/*.test.js"
    artifacts:
      - /app/report.xml # Generated by the testcafe-xunit reporter
    env:
      SAUCE_USERNAME: $SAUCE_USERNAME
      SAUCE_ACCESS_KEY: $SAUCE_ACCESS_KEY

artifacts:
  download:
    when: always
    match:
      - "*"
    directory: ./artifacts
